# Syntax highlighting and Z
source /usr/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
source ~/.zsh/zsh-z.plugin.zsh
autoload -U compinit && compinit

# Suggestions
zstyle ':autocomplete:tab:*' insert-unambiguous yes
zstyle ':completion:*' menu select
zstyle ':autocomplete:*' min-input 2
# case insensitive path-completion
zstyle ':completion:*' matcher-list 'm:{[:lower:][:upper:]}={[:upper:][:lower:]}' 'm:{[:lower:][:upper:]}={[:upper:][:lower:]} l:|=* r:|=*' 'm:{[:lower:][:upper:]}={[:upper:][:lower:]} l:|=* r:|=*' 'm:{[:lower:][:upper:]}={[:upper:][:lower:]} l:|=* r:|=*'
# partial completion suggestions
zstyle ':completion:*' list-suffixeszstyle ':completion:*' expand prefix suffix

# Fix searching
autoload -U up-line-or-beginning-search
autoload -U down-line-or-beginning-search
zle -N up-line-or-beginning-search
zle -N down-line-or-beginning-search
bindkey "$key[Up]" up-line-or-beginning-search
bindkey "$key[Down]" down-line-or-beginning-search

# History control
HISTFILE=~/.zsh_history
HISTCONTROL=ignoredups:ignorespace
HISTSIZE=100000
HISTFILESIZE=2000000
setopt appendhistory

# Alias definitions
alias ls='ls --color=auto -lax'
alias ll='ls --color=auto -l'
alias la='ls --color=auto -A'
alias l='ls --color=auto -CF' 
alias grep='grep --color=auto'
alias ungron="gron --ungron"
alias ks='ls'
alias :q="exit"
alias _='sudo'

# functions file
if [ -f ~/.sh_aliases ]; then
    . ~/.sh_aliases
fi

# Color
export TERM="xterm-256color"

# Vim
export EDITOR=/usr/bin/vim

# PATH
export PATH=~/.local/bin:/snap/bin:/usr/sandbox/:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games:/usr/share/games:/usr/local/sbin:/usr/sbin:/sbin:$PATH$

# Go
export GOROOT=/usr/lib/go
export GOPATH=$HOME/go
export PATH=$GOPATH/bin:$GOROOT/bin:$PATH
source $GOPATH/src/github.com/tomnomnom/gf/gf-completion.zsh

# Wordlists
export DIRS_LARGE=~/wordlists/assetnote-wordlists/data/manual/raft-large-directories.txt
export DIRS_SMALL=~/wordlists/assetnote-wordlists/data/manual/raft-small-directories.txt
export FILES_LARGE=~/wordlists/assetnote-wordlists/data/manual/raft-large-files.txt
export FILES_SMALL=~/wordlists/assetnote-wordlists/data/manual/raft-small-files.txt
export WORDS_LARGE=~/wordlists/assetnote-wordlists/data/manual/raft-large-words.txt
export WORDS_SMALL=~/wordlists/assetnote-wordlists/data/manual/raft-small-words.txt
export EXT_LARGE=~/wordlists/assetnote-wordlists/data/manual/raft-large-extensions.txt
export EXT_SMALL=~/wordlists/assetnote-wordlists/data/manual/raft-small-extensions.txt
export DIRS_RECURSE=~/wordlists/custom/dir-recursive-tokens-wordlist.txt
export DIRS_PATHS=~/wordlists/custom/dir-full-paths-wordlist.txt
export FILE_EXT=~/wordlists/custom/file-w-ext-wordlist.txt
export VHOSTS=~/wordlists/custom/vhosts.txt


# Change up a variable number of directories
# E.g:
#   cu   -> cd ../
#   cu 2 -> cd ../../
#   cu 3 -> cd ../../../
function cu {
    local count=$1
    if [ -z "${count}" ]; then
        count=1
    fi
    local path=""
    for i in $(seq 1 ${count}); do
        path="${path}../"
    done
    cd $path
}

# Prompt colours
atC="%F{38}"
nameC="%F{245}"
hostC="%F{245}"
pathC="%F{172}"
gitC="%F{245}"
pointerC="%F{40}"
normalC="%F{white}"
borderC="%F{38}"

# Red name for root
if [ "${UID}" -eq "0" ]; then 
  nameC="%F{red}" 
fi

# Prompt
PROMPT="%f${nameC}%m%f${atC}:%f${borderC}[%f${pathC}%d%f${borderC}]%f%(?.${pointerC}.%F{196}) Â» %f${normalC}"